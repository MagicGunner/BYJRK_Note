<Window
    x:Class="BindingsDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:BindingsDemo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow"
    Width="800"
    Height="450"
    d:DataContext="{d:DesignInstance local:MainWindowViewModel,
                                     IsDesignTimeCreatable=True}"
    Loaded="MainWindow_OnLoaded"
    mc:Ignorable="d">

    <Window.Resources>
        <sys:String x:Key="Str">MissBlue</sys:String>
        <local:MyResource x:Key="MyResource" />
        <local:BindingProxy x:Key="MyButton" Data="{Binding ElementName=Btn}"></local:BindingProxy>
    </Window.Resources>

    <StackPanel
        Name="Panel"
        Margin="10"
        Orientation="Vertical">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="花括号语法: " />
            <TextBlock Text="{Binding Message}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="TextBlock.Text: " />
            <TextBlock>
                <TextBlock.Text>
                    <Binding Path="Message" />
                </TextBlock.Text>
            </TextBlock>
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="后台代码绑定: " />
            <TextBlock x:Name="TBL" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Binding StaticResource Source: " />
            <TextBlock Text="{Binding Source={StaticResource Str}}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="DynamicResource Source: " />
            <TextBlock Text="{DynamicResource Str}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="MyResource: " />
            <TextBlock Text="{Binding Source={StaticResource MyResource}, Path=Message}" />
            <TextBlock Text="{Binding Source={x:Static local:MyResource.StaticString}}" />
            <TextBlock Text="{Binding Source={x:Static local:MyResource.ConstString}}" />
            <TextBlock Text="{Binding Source={x:Static HorizontalAlignment.Stretch}}" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="TexBlock绑定到TextBox: " />
            <TextBox Name="TextBox" Margin="5 0" MinWidth="100" />
            <TextBlock Text="{Binding ElementName=TextBox, Path=Text}">
                <!-- 这里是绑定不到的，因为TooTip不是Window可视化树的一部分 是popup-->
                <TextBlock.ToolTip>
                    <TextBlock Text="{Binding ElementName=TextBox, Path=Text}"></TextBlock>
                </TextBlock.ToolTip>
            </TextBlock>
        </StackPanel>

        <StackPanel Orientation="Vertical">
            <TextBlock Text="DataGrid: " />
            <TextBox Name="TextBox1" Margin="5 0" MinWidth="100" />
            <DataGrid>
                <DataGrid.Columns>
                    <!-- 这里也是绑定不到的，因为DataGridColumn不是可视化树的一部分 -->
                    <!-- <DataGridTextColumn Header="{Binding ElementName=TextBox, Path=Text}"></DataGridTextColumn> -->
                    <DataGridTextColumn Header="{Binding Source={x:Reference Name=TextBox1}, Path=Text}"></DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <StackPanel Orientation="Horizontal">
            <TextBlock Text="RelativeSource: " />
            <TextBlock
                Text="{Binding  RelativeSource={RelativeSource AncestorType=Window}, Path=Top}">
            </TextBlock>
        </StackPanel>

        <StackPanel Orientation="Horizontal">
            <TextBlock Text="AncestorLevel: " />
            <Grid Tag="Level 3">
                <Grid Tag="Level 2">
                    <Grid Tag="Level 1">
                        <TextBlock
                            Text="{Binding  RelativeSource={RelativeSource AncestorType=Grid, AncestorLevel=3}, Path=Tag}">
                        </TextBlock>
                    </Grid>
                </Grid>
            </Grid>

        </StackPanel>

        <Button Content="Click Me" Name="Btn">
            <Button.ToolTip>
                <ToolTip>
                    <TextBlock Text="{Binding Source={StaticResource MyButton} ,Path=Data.Content}"></TextBlock>
                </ToolTip>
            </Button.ToolTip>
        </Button>

    </StackPanel>


</Window>